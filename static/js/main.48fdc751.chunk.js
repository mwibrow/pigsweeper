(this.webpackJsonppigsweeper=this.webpackJsonppigsweeper||[]).push([[0],[,,,,,,,,,,,,,,,function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){"use strict";i.r(t);var s,n=i(0),c=i(1),a=i.n(c),r=i(8),o=i.n(r),l=(i(15),i(2)),u=i(3),h=i(5),d=i(6);!function(e){e.Empty="empty",e.Mine="mine"}(s||(s={}));var f,v=function(){function e(){Object(h.a)(this,e),this.kind=s.Empty,this.visible=!1,this.flagged=!1,this.neighbors=0}return Object(d.a)(e,[{key:"setKind",value:function(e){this.kind=e}},{key:"isMine",value:function(){return this.kind===s.Mine}}]),e}(),b=function(){function e(t,i,s){Object(h.a)(this,e),this.cells=void 0,this.rows=void 0,this.columns=void 0,this.mines=void 0,this.flags=void 0,this.covered=void 0,this.rows=Math.max(t,2),this.columns=Math.max(i,2),this.mines=Math.max(Math.min(s,this.rows*this.columns-1),1),this.flags=this.mines,this.covered=this.rows*this.flags,this.cells=[],this.initialise()}return Object(d.a)(e,[{key:"initialise",value:function(){for(var e=0;e<this.rows;e++){this.cells.push([]);for(var t=0;t<this.columns;t++)this.cells[e].push(new v)}}},{key:"create",value:function(e,t){for(var i=this,n=e,c=t,a=0;a<this.rows;a++){this.cells.push([]);for(var r=0;r<this.columns;r++)this.cells[a].push(new v)}for(var o=this.mines;o>0;o--){var l=Math.floor(Math.random()*this.rows),u=Math.floor(Math.random()*this.columns);this.isMine(l,u)||l===n||u===c?o++:this.cells[l][u].setKind(s.Mine)}for(var h=0;h<this.rows;h++)for(var d=function(e){if(!i.isMine(h,e)){var t=0;[h-1,h,h+1].map((function(s){return[e-1,e,e+1].map((function(e){i.isMine(s,e)&&t++}))})),i.cells[h][e].neighbors=t}},f=0;f<this.columns;f++)d(f);this.flags=this.mines,this.covered=this.rows*this.columns}},{key:"cellAt",value:function(e,t){return this.cells[e][t]}},{key:"isInGrid",value:function(e,t){return e>=0&&e<this.rows&&t>=0&&t<this.columns}},{key:"isMine",value:function(e,t){return this.isInGrid(e,t)&&this.cells[e][t].isMine()}},{key:"isVisible",value:function(e,t){return this.isInGrid(e,t)&&this.cells[e][t].visible}},{key:"reset",value:function(){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.cells[e][t].flagged=!1,this.cells[e][t].visible=!1}},{key:"restart",value:function(){this.create()}},{key:"reveal",value:function(){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.isMine(e,t)&&(this.cells[e][t].flagged=!1,this.cells[e][t].visible=!0)}},{key:"hasWon",value:function(){return this.covered===this.mines}},{key:"toggleFlag",value:function(e,t){this.cells[e][t].flagged=!this.cells[e][t].flagged,this.cells[e][t].flagged?this.flags--:this.flags++}},{key:"hasNeighbours",value:function(e,t){return Boolean(this.isInGrid(e,t)&&this.cells[e][t].neighbors>0)}},{key:"makeVisible",value:function(e,t){!this.isInGrid(e,t)||this.cells[e][t].visible||this.cells[e][t].isMine()||this.cells[e][t].flagged||(this.cells[e][t].visible=!0,this.covered--,this.hasNeighbours(e,t)||(this.makeVisible(e-1,t),this.makeVisible(e+1,t),this.makeVisible(e,t-1),this.makeVisible(e,t+1),this.makeVisible(e-1,t-1),this.makeVisible(e-1,t+1),this.makeVisible(e+1,t-1),this.makeVisible(e+1,t+1)))}},{key:"showMines",value:function(){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.isMine(e,t)&&(this.cells[e][t].flagged=!1,this.cells[e][t].visible=!0)}}]),e}(),g=(i(16),function(e){var t=e.row,i=e.column,s=e.renderer;return Object(n.jsx)("div",{className:"grid-cell",children:s(t,i)})}),j=(i(17),function(e){var t=e.rows,i=e.columns,s=e.cellRenderer;return Object(n.jsx)("div",{className:"grid",children:Array(t).fill(1).map((function(e,t){return Object(n.jsx)("div",{className:"grid-cell-row",children:Array(i).fill(1).map((function(e,i){return Object(n.jsx)("div",{className:"grid-cell-column",children:Object(n.jsx)(g,{row:t,column:i,renderer:s})},"grid-column-".concat(i+1))}))},"grid-row-".concat(t+1))}))})}),m=i(7),O=i(9),p=(i(18),function(e){var t=e.active,i=e.visible,s=e.mine,c=e.flagged,a=e.neighbors,r=Object(O.a)(e,["active","visible","mine","flagged","neighbors"]);return Object(n.jsxs)("div",Object(m.a)(Object(m.a)({className:Object(u.a)("tile",{"tile-active":t,"tile-visible":i})},r),{},{children:[Object(n.jsx)("div",{className:Object(u.a)("tile-image","tile-image-kind-".concat(s?"mine":"empty"))}),Object(n.jsx)("div",{className:Object(u.a)("tile-neighbors","tile-neighbors-".concat(a))}),c?Object(n.jsx)("div",{className:"tile-flagged"}):null]}))});i(19);!function(e){e[e.Reset=0]="Reset",e[e.Running=1]="Running",e[e.Stopped=2]="Stopped"}(f||(f={}));var w,k=function(e){var t=e.state,i=Object(c.useRef)(void 0),s=Object(c.useState)(0),a=Object(l.a)(s,2),r=a[0],o=a[1];return Object(c.useEffect)((function(){switch(t){case f.Reset:o((function(){return 0})),clearInterval(i.current),i.current=void 0;break;case f.Running:i.current||(o((function(){return 0})),i.current=window.setInterval((function(){o((function(e){return e+1}))}),1e3));break;case f.Stopped:clearInterval(i.current),i.current=void 0}return function(){clearInterval(i.current),i.current=void 0}}),[t,i]),Object(n.jsxs)("div",{className:"timer",children:["Time: ",r]})},x=function(e){e.stopPropagation(),e.preventDefault()},M=function(e){var t=e.children,i=e.onTouchStart,s=e.onTouchEnd,a=e.onLongTouchEnd,r=e.longTouchDuration,o=void 0===r?500:r,u=e.active,h=Object(c.useState)(!1),d=Object(l.a)(h,2),f=d[0],v=d[1],b=Object(c.useRef)();if(!u)return window.clearTimeout(b.current),Object(n.jsx)("div",{className:"tile-events",children:t});var g=function(e){x(e),i(),v(!1),b.current=window.setTimeout((function(){v(!0),a()}),o)},j=function(e){var t=!1,i=e;3!==i.nativeEvent.which&&2!==i.nativeEvent.button||(t=!0),x(e),window.clearTimeout(b.current),f||(t?a():s()),v(!1)};return Object(n.jsx)("div",{className:"tile-events",onMouseDown:g,onMouseUp:j,onTouchStart:g,onTouchEnd:j,onTouchMove:j,onClick:x,onContextMenu:x,children:t})};i(20);!function(e){e[e.Default=0]="Default",e[e.Playing=1]="Playing",e[e.Won=2]="Won",e[e.Lost=3]="Lost"}(w||(w={}));var y=function(e){e.preventDefault(),e.stopPropagation()};var S=function(){var e=Object(c.useState)(10),t=Object(l.a)(e,1)[0],i=Object(c.useState)(10),s=Object(l.a)(i,1)[0],a=Object(c.useState)(20),r=Object(l.a)(a,1)[0],o=Object(c.useState)(new b(t,s,r)),h=Object(l.a)(o,2),d=h[0],v=h[1],g=Object(c.useState)(0),m=Object(l.a)(g,2),O=m[0],x=m[1],S=Object(c.useState)(w.Default),N=Object(l.a)(S,2),T=N[0],R=N[1],V=Object(c.useState)(!1),E=Object(l.a)(V,2),I=E[0],D=E[1],P=Object(c.useState)(f.Stopped),C=Object(l.a)(P,2),L=C[0],F=C[1],W=T===w.Playing||T===w.Default;return Object(n.jsxs)("div",{className:"App",onContextMenu:y,onClick:y,children:[Object(n.jsx)("div",{className:"heading",children:"Pigsweeper"}),Object(n.jsxs)("div",{className:"game",children:[Object(n.jsxs)("div",{className:"dashboard",children:[Object(n.jsx)("div",{className:"dashboard-timer",children:Object(n.jsx)(k,{state:L})}),Object(n.jsx)("div",{className:Object(u.a)("dashboard-status",{"status-lost":T===w.Lost,"status-guessing":I,"status-won":T===w.Won}),onClick:function(){v(new b(t,s,r)),x(0),D(!1),R(w.Default),F(f.Reset)}}),Object(n.jsxs)("div",{className:"dashboard-flags",children:["Flags: ",d.flags]})]}),Object(n.jsx)(j,{rows:d.rows,columns:d.columns,cellRenderer:function(e,t){var i=d.cellAt(e,t);return Object(n.jsx)(M,{active:W&&!d.isVisible(e,t),onTouchStart:function(){D(!0)},onTouchEnd:function(){return function(e,t){D(!1),0===O&&d.create(e,t),d.isMine(e,t)?(d.showMines(),R(w.Lost),F(f.Stopped)):(d.makeVisible(e,t),d.hasWon()?(R(w.Won),F(f.Stopped)):(R(w.Playing),F(f.Running))),x(O+1)}(e,t)},onLongTouchEnd:function(){return function(e,t){D(!1),0===O&&d.create(e,t),d.toggleFlag(e,t),x(O+1)}(e,t)},children:Object(n.jsx)(p,{active:W,visible:i.visible,mine:i.isMine(),neighbors:i.neighbors,flagged:i.flagged})})}})]})]})},N=function(e){e&&e instanceof Function&&i.e(3).then(i.bind(null,22)).then((function(t){var i=t.getCLS,s=t.getFID,n=t.getFCP,c=t.getLCP,a=t.getTTFB;i(e),s(e),n(e),c(e),a(e)}))};o.a.render(Object(n.jsx)(a.a.StrictMode,{children:Object(n.jsx)(S,{})}),document.getElementById("root")),N()}],[[21,1,2]]]);
//# sourceMappingURL=main.48fdc751.chunk.js.map