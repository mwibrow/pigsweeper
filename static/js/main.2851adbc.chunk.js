(this.webpackJsonppigsweeper=this.webpackJsonppigsweeper||[]).push([[0],[,,,,,,,,,,,,,function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){"use strict";i.r(t);var s,n=i(0),c=i(1),r=i.n(c),a=i(7),l=i.n(a),o=(i(13),i(2)),u=i(3),h=i(5),d=i(6);!function(e){e.Empty="empty",e.Mine="mine"}(s||(s={}));var f,v=function(){function e(){Object(h.a)(this,e),this.kind=s.Empty,this.visible=!1,this.flagged=!1,this.neighbors=0}return Object(d.a)(e,[{key:"setKind",value:function(e){this.kind=e}},{key:"isMine",value:function(){return this.kind===s.Mine}}]),e}(),b=function(){function e(t,i,s){Object(h.a)(this,e),this.cells=void 0,this.rows=void 0,this.columns=void 0,this.mines=void 0,this.flags=void 0,this.covered=void 0,this.rows=Math.max(t,2),this.columns=Math.max(i,2),this.mines=Math.max(Math.min(s,this.rows*this.columns-1),1),this.flags=this.mines,this.covered=this.mines,this.cells=[],this.create()}return Object(d.a)(e,[{key:"create",value:function(){for(var e=this,t=0;t<this.rows;t++){this.cells.push([]);for(var i=0;i<this.columns;i++)this.cells[t].push(new v)}for(var n=this.mines;n>0;n--){var c=Math.floor(Math.random()*this.rows),r=Math.floor(Math.random()*this.columns);this.isMine(c,r)?n++:this.cells[c][r].setKind(s.Mine)}for(var a=0;a<this.rows;a++)for(var l=function(t){if(!e.isMine(a,t)){var i=0;[a-1,a,a+1].map((function(s){return[t-1,t,t+1].map((function(t){e.isMine(s,t)&&i++}))})),e.cells[a][t].neighbors=i}},o=0;o<this.columns;o++)l(o);this.covered=this.mines,this.flags=this.mines}},{key:"cellAt",value:function(e,t){return this.cells[e][t]}},{key:"isInGrid",value:function(e,t){return e>=0&&e<this.rows&&t>=0&&t<this.columns}},{key:"isMine",value:function(e,t){return this.isInGrid(e,t)&&this.cells[e][t].isMine()}},{key:"reset",value:function(){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.cells[e][t].flagged=!1,this.cells[e][t].visible=!1}},{key:"restart",value:function(){this.create()}},{key:"reveal",value:function(){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.isMine(e,t)&&(this.cells[e][t].flagged=!1,this.cells[e][t].visible=!0)}},{key:"toggleFlag",value:function(e,t){this.cells[e][t].flagged=!this.cells[e][t].flagged,this.cells[e][t].flagged?this.flags--:this.flags++}},{key:"hasNeighbours",value:function(e,t){return Boolean(this.isInGrid(e,t)&&this.cells[e][t].neighbors>0)}},{key:"makeVisible",value:function(e,t){!this.isInGrid(e,t)||this.cells[e][t].visible||this.cells[e][t].isMine()||this.cells[e][t].flagged||(this.cells[e][t].visible=!0,this.covered--,this.hasNeighbours(e,t)||(this.makeVisible(e-1,t),this.makeVisible(e+1,t),this.makeVisible(e,t-1),this.makeVisible(e,t+1)))}},{key:"hasWon",value:function(){return this.covered===this.mines}},{key:"showMines",value:function(){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.isMine(e,t)&&(this.cells[e][t].flagged=!1,this.cells[e][t].visible=!0)}}]),e}(),g=(i(14),function(e){var t=e.row,i=e.column,s=e.renderer;return Object(n.jsx)("div",{className:"grid-cell",children:s(t,i)})}),j=(i(15),function(e){var t=e.rows,i=e.columns,s=e.cellRenderer;return Object(n.jsx)("div",{className:"grid",children:Array(t).fill(1).map((function(e,t){return Object(n.jsx)("div",{className:"grid-cell-row",children:Array(i).fill(1).map((function(e,i){return Object(n.jsx)("div",{className:"grid-cell-column",children:Object(n.jsx)(g,{row:t,column:i,renderer:s})},"grid-column-".concat(i+1))}))},"grid-row-".concat(t+1))}))})});i(16);!function(e){e.Happy="\ud83d\ude42",e.Sad="\ud83d\ude2d",e.Scared="\ud83d\ude28",e.Covered="\ud83d\udfeb",e.Flag="\ud83d\udea9",e.Mine="\ud83d\udc37",e.Empty="\ud83d\udfe9"}(f||(f={}));var m,p=function(e){var t=e.name,i=Array.isArray(t)?t:[t];return Object(n.jsx)("div",{className:"sprite",children:i.map((function(e,t){return Object(n.jsx)("span",{className:Object(u.a)("sprite","sprite-name-".concat(e)),children:e},"sprite-".concat(t))}))})},O=(i(17),function(e){var t=e.active,i=e.visible,s=e.mine,c=e.flagged,r=e.neighbors,a=[];return i?s?(a.push(f.Covered),a.push(f.Mine)):a.push(f.Empty):(a.push(f.Covered),c&&a.push(f.Flag)),Object(n.jsxs)("div",{className:Object(u.a)("tile",{"tile-active":t,"tile-visible":i}),children:[Object(n.jsx)(p,{name:a}),i?Object(n.jsx)("span",{className:"tile-neighbors",children:r||""}):null]})});i(18);!function(e){e[e.Reset=0]="Reset",e[e.Running=1]="Running",e[e.Stopped=2]="Stopped"}(m||(m={}));var w,y=function(e){var t=e.state,i=Object(c.useRef)(void 0),s=Object(c.useState)(0),r=Object(o.a)(s,2),a=r[0],l=r[1];return Object(c.useEffect)((function(){switch(t){case m.Reset:l((function(){return 0})),clearInterval(i.current),i.current=void 0;break;case m.Running:i.current||(l((function(){return 0})),i.current=window.setInterval((function(){l((function(e){return e+1}))}),1e3));break;case m.Stopped:clearInterval(i.current),i.current=void 0}return function(){clearInterval(i.current),i.current=void 0}}),[t,i]),Object(n.jsxs)("div",{className:"timer",children:["Time: ",a]})};i(19);!function(e){e[e.Default=0]="Default",e[e.Playing=1]="Playing",e[e.Won=2]="Won",e[e.Lost=3]="Lost"}(w||(w={}));var M=function(){var e=Object(c.useState)(12),t=Object(o.a)(e,1)[0],i=Object(c.useState)(12),s=Object(o.a)(i,1)[0],r=Object(c.useState)(24),a=Object(o.a)(r,1)[0],l=Object(c.useState)(new b(t,s,a)),h=Object(o.a)(l,2),d=h[0],v=h[1],g=Object(c.useState)(0),M=Object(o.a)(g,2),k=M[0],x=M[1],S=Object(c.useState)(w.Default),N=Object(o.a)(S,2),R=N[0],I=N[1],C=Object(c.useState)(!1),F=Object(o.a)(C,2),P=F[0],D=F[1],A=Object(c.useState)(m.Stopped),L=Object(o.a)(A,2),E=L[0],V=L[1],W=R===w.Playing,G=W||R===w.Default,B=function(){W&&D(!0)},T=function(){W&&D(!1)},H=function(e,t){d.toggleFlag(e,t),x(k+1),I(w.Playing),V(m.Running)},J=function(e,t){d.isMine(e,t)?(d.showMines(),I(w.Lost),V(m.Stopped)):(d.makeVisible(e,t),d.hasWon()?(I(w.Won),V(m.Stopped)):(I(w.Playing),V(m.Running))),x(k+1)},K=function(e,t,i){if(G&&!d.cells[t][i].visible)return function(s){s.preventDefault(),s.stopPropagation(),e(t,i)}},U=P?f.Scared:W||R!==w.Lost?f.Happy:f.Sad;return Object(n.jsxs)("div",{className:"App",children:[Object(n.jsx)("div",{className:"heading",children:"Pigsweeper"}),Object(n.jsxs)("div",{className:"game",children:[Object(n.jsxs)("div",{className:"dashboard",children:[Object(n.jsx)("div",{className:"dashboard-timer",children:Object(n.jsx)(y,{state:E})}),Object(n.jsx)("div",{className:Object(u.a)("dashboard-status",{"status-lost":R===w.Lost,"status-guessing":P}),onClick:function(){v(new b(t,s,a)),x(0),I(w.Default),V(m.Reset)},children:Object(n.jsx)(p,{name:U})}),Object(n.jsxs)("div",{className:"dashboard-flags",children:["Flags: ",d.flags]})]}),Object(n.jsx)(j,{rows:d.rows,columns:d.columns,cellRenderer:function(e,t){var i=d.cellAt(e,t);return Object(n.jsx)("div",{onMouseDown:B,onMouseUp:T,onClick:K(J,e,t),onContextMenu:K(H,e,t),children:Object(n.jsx)(O,{active:G,visible:i.visible,mine:i.isMine(),neighbors:i.neighbors,flagged:i.flagged})})}})]})]})},k=function(e){e&&e instanceof Function&&i.e(3).then(i.bind(null,21)).then((function(t){var i=t.getCLS,s=t.getFID,n=t.getFCP,c=t.getLCP,r=t.getTTFB;i(e),s(e),n(e),c(e),r(e)}))};l.a.render(Object(n.jsx)(r.a.StrictMode,{children:Object(n.jsx)(M,{})}),document.getElementById("root")),k()}],[[20,1,2]]]);
//# sourceMappingURL=main.2851adbc.chunk.js.map